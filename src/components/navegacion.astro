---
import Boton from "./boton.astro"
---

<header id="encabezado" class="bar">     
    <nav>
        <!--menu visible -->
        <div id="menu-trigger" class="menu">
            <img src="/pon.svg" alt="menu-visible">
        </div>
        <!--menu oculto -->
        <ul id="menu-content" class="oculto">
            <Boton
                href="/principal"
                clase="ucr"
                imagen="/UCR.svg"
                atribute="UCR"
                />
                
            <Boton
                href="/tec"
                clase="tec"
                imagen="/TEC.svg"
                atribute="TEC"
            />
            
            <Boton
                href="/menu"
                clase="derecha"
                imagen="/mpd.svg"
                atribute="menu"
            />
        
        </ul>
    </nav>

</header>

<style>
    .encabezado{
        width: 100%;
        position: sticky;
    }
    .bar{
        display: flex;
        margin: initial;
        padding: 0.5rem;
        height: fit-content;
        margin-bottom: 0%;
    }
    nav{
        display: flex;
        width: 80%;
        height: 50%;
        border: 1px;
        border-color: white;
        border-radius: 5%;
        position:relative;
        top: 0%;
    }
    @media screen and (max-width:600px) {
        nav{
            display: flex;
            width: 80%;
            height: 50%;
            border: 1px;
            border-color: white;
            border-radius: 5%;
            position:relative;
            top: 0%;
        }
        
    }
    .menu {
        height: 3rem;          /* mismo tamaño que cada li del componente Boton */
        width: 3rem;
        display: flex;
        align-items: center;
        padding: 1rem;
        cursor: pointer;
        background-color: #23262d;
        border-radius: 7px;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
        opacity: 0.7;
        position: fixed;
        top: 5rem;
        left: 3rem;
    }

    .menu img {
        height: 150%;
        width: auto;
        display: flex;
		padding: 1px;
		
    }
    @media screen and (max-width:600px) {
        .menu {
            height: 3rem;          /* mismo tamaño que cada li del componente Boton */
            width: 3rem;
            display: flex;
            align-items: center;
            padding: 1rem;
            cursor: pointer;
            background-color: #23262d;
            border-radius: 7px;
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
            opacity: 0.7;
            position: relative;
        }

        .menu img {
            height: 150%;
            width: auto;
        }
            
    }

    .oculto{
        display: none;
    }

    ul{
        display: grid;
        grid: none;
        width: fit-content;
        padding: 1%;
        margin: none;
        position: fixed;
        align-items: center;
        justify-items: center;
    }
    
    @media screen and (max-width:600px){
        ul{
        display: grid;
        grid-template-columns: auto auto 25% auto;
        grid-template-rows: 60%;
        width: 100%;
        padding: 1%;
        margin: none;
        position:relative;
        }
    }
    .hidden{
        display: none;
    }

</style>

<script>
    const trigger = document.getElementById("menu-trigger");
    const menu = document.getElementById("menu-content");

    // Mostrar/ocultar menú al tocar el botón
    trigger.addEventListener("click", (e) => {
        e.stopPropagation(); // Evita que el click cuente como click fuera

        menu.classList.toggle("oculto");

        if (menu.classList.contains("oculto")) {
            trigger.classList.remove("hidden");
        } else {
            trigger.classList.add("hidden");
        }
    });

    // Cerrar menú si se toca fuera de él
    document.addEventListener("click", (e) => {
        // Si el menú ya está oculto, no hacemos nada
        if (menu.classList.contains("oculto")) return;

        // Si el click NO fue dentro del menú
        if (!menu.contains(e.target)) {
            menu.classList.add("oculto");
            trigger.classList.remove("hidden");
        }
    });

    // Evitar que los clics dentro del menú cierren el menú
    menu.addEventListener("click", (e) => {
        e.stopPropagation();
    });
</script>
